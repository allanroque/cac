---
- name: Install and Configure Website and AppPool in IIS
  hosts: windows_server  # Substitua 'windows_server' pelo nome do host ou grupo de hosts onde o IIS deve ser configurado.
  gather_facts: no  # Não é necessário coletar fatos do sistema.

  tasks:
    - name: Install IIS
      win_feature:
        name: Web-Server  # O nome do recurso para a instalação do IIS.
        state: present    # Garante que o recurso seja instalado.

    - name: Create App Pool
      win_iisapppool:
        name: MyAppPool         # Nome do pool de aplicativos.
        state: present          # Garante que o pool de aplicativos exista.
        managed_pipeline_mode: Integrated  # Pode ser Classic ou Integrated, dependendo das suas necessidades.

    - name: Create Website
      win_iis_website:
        name: MyWebsite             # Nome do site.
        state: started              # Inicia o site.
        application_pool: MyAppPool  # Associa o site ao pool de aplicativos criado anteriormente.
        physical_path: C:\MyWebsite # Caminho físico onde os arquivos do site estão localizados.